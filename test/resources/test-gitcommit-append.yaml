apiVersion: v1
kind: ConfigMap
metadata:
  name: test-append-data
  namespace: default
data:
  log_entry: "Additional log entry from ConfigMap"
---
apiVersion: gco.galos.one/v1
kind: GitCommit
metadata:
  name: test-append-mode-fixed
  namespace: default
spec:
  repository: "https://github.com/mihaigalos/test.git"
  branch: "main"
  commitMessage: "Test append mode with fixed controller"
  authSecretRef: "test-git-secret"
  files:
    - path: "append-test.log"
      content: "=== Initial log content ===\nThis is the first line in the file.\n"
  resourceRefs:
    - apiVersion: v1
      kind: ConfigMap
      name: test-append-data
      namespace: default
      strategy:
        type: single-field
        path: "append-test.log"
        writeMode: append
        fieldRef:
          key: log_entry